#Qizilbash Revolts disaster, coded by Alejandro, written and designed by Dynamo

qizilbash_revolts = {
    potential = {
        tag = TUR
        religion = sunni
        NOT = {
            is_year = 1600
            has_country_flag = had_qizilbash_revolts
        }
    }
    
    can_start = {
        has_any_disaster = no
        religion = sunni
        custom_trigger_tooltip = {
            tooltip = NO_TOLERANCE_OF_HERETICS_TOOLTIP
            NOT = { shiite = 2 }
        }
        is_year = 1500
        NOT = { is_year = 1600 }
        any_owned_province = {
            OR = {
                # TODO
            }
        }
        any_country = {
            religion = shiite
            is_subject = no
            capital_scope = {
                OR = {
                    western_persia_provinces = yes
                    south_caucasus_provinces = yes
                }
            }
            # TODO
        }
    }
    
    can_stop = {
        OR = {
            has_any_disaster = yes
            custom_trigger_tooltip = {
                tooltip = TOLERANCE_OF_HERETICS_TOOLTIP
                shiite = 2
            }
            NOT = {
                religion = sunni
                any_owned_province = {
                    OR = {
                        # TODO
                    }
                }
                any_country = {
                    religion = shiite
                    capital_scope = {}
                    # TODO
                }
            }
        }
    }
    
    progress = {
        modifier = {
            factor = 2.5
            custom_trigger_tooltip = {
                tooltip = NO_TOLERANCE_OF_HERETICS_TOOLTIP
                NOT = { shiite = 2 }
            }
        }
        modifier = {
            factor = 2.5
            NOT = { shiite = 0 }
        }
        modifier = {
            factor = 2.5
            ruler_has_personality = cruel_personality
        }
        modifier = {
            factor = 2.5
            ruler_has_personality = malevolent_personality
        }
    }
    
    can_end = {
        # TODO
        OR = {
            custom_trigger_tooltip = {
                tooltip = disaster_active_for_30_years_tooltip
                had_country_flag = { flag = had_qizilbash_revolts days = 10950 }    # REMEMBER TO SET COUNTRY FLAG IN ON_START EVENT
            }
        }
    }
    
    modifier = {
        global_unrest = 1
        stability_cost_modifier = 0.1
    }
    
    on_start = btc_qizilbash_revolts.1
    on_end = btc_qizilbash_revolts.2
    on_monthly = {
        events = {
        
        }
        random_events = {
            1000 = 0
            100 = btc_qizilbash_revolts.3
            100 = btc_qizilbash_revolts.4
            100 = btc_qizilbash_revolts.5
            100 = btc_qizilbash_revolts.6
            100 = btc_qizilbash_revolts.7
            100 = btc_qizilbash_revolts.8
            100 = btc_qizilbash_revolts.9
            100 = btc_qizilbash_revolts.10
            100 = btc_qizilbash_revolts.11
        }
    }
}