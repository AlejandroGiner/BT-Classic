#Great Bullion Famine events
#By Helena and Alejandro

namespace = bullion

#Start of the Great Bullion Famine
country_event = {
	id = bullion.0
	title = bullion.0.t
	desc = bullion.0.d
	picture = OVEREXTENSION_eventPicture
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			capital_scope = {
				superregion = europe_superregion
			}
			tag = MAM
			tag = TUR
			AND = {
				capital_scope = { continent = europe }
				religion_group = christian
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					OR = {
						tag = MAM
						tag = TUR
					}
				}
				add_country_modifier = {
					name = east_west_profit_trade
					duration = -1
				}
			}
			else_if = {
				limit = {
					capital_scope = { continent = europe }
					religion_group = christian
				}
				add_country_modifier = {
					name = east_west_deficit_trade
					duration = -1
				}
			}
			if = {
				limit = {
					capital_scope = {
						OR = {
							superregion = europe_superregion
							superregion = central_europe_superregion
							superregion = northern_europe_superregion
							region = italy_region
						}
					}
					NOT = { tag = MAM tag = TUR }
				}
				add_country_modifier = {
					name = great_bullion_famine_modifier
					duration = -1
				}
			}
		}
	}
	
	option = {
		name = bullion.0.a
		trigger = {
			OR = {
				tag = MAM
				tag = TUR
			}
		}
		tooltip = {
			add_country_modifier = {
				name = east_west_profit_trade
				duration = -1
			}
		}
		custom_tooltip = bullion_start_tt
	}
	option = {
		name = bullion.0.b
		trigger = {
			NOT = {
				tag = MAM
				tag = TUR
			}
		}
		tooltip = {
			if = {
				limit = {
					capital_scope = { continent = europe }
					religion_group = christian
				}
				add_country_modifier = {
					name = east_west_deficit_trade
					duration = -1
				}
			}
			if = {
				limit = {
					capital_scope = { superregion = europe_superregion }
					NOT = { tag = MAM tag = TUR }
				}
				add_country_modifier = {
					name = great_bullion_famine_modifier
					duration = -1
				}
			}
		}
		custom_tooltip = bullion_start_tt
	}
}

#End of Hundred Years War alleviates the famine
country_event = {
	id = bullion.1
	title = bullion.1.t
	desc = bullion.1.d
	picture = OVEREXTENSION_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = bullion.1.a
		add_inflation = -1
	}
}

#North African Gold
country_event = {
	id = bullion.2
	title = bullion.2.t
	desc = bullion.2.d
	picture = MERCHANTS_TALKING_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		NOT = { has_global_flag = great_bullion_famine_ended }
		is_year = 1450
		owns = 125
		has_country_modifier = great_bullion_famine_modifier
	}
	
	mean_time_to_happen = {
		years = 5
	}
	
	option = {	#Export the food stockpile to alleviate the famine
		name = bullion.2.a
		ai_chance = { factor = 8 }
		add_years_of_income = 1
		add_inflation = 2
		sicily_area = = {
			limit = { owned_by = ROOT }
			add_province_modifier = {
				name = sicily_sold_wheat
				duration = 1095
			}
		}
		east_sicily_area = {
			limit = { owned_by = ROOT }
			add_province_modifier = {
				name = sicily_sold_wheat
				duration = 1095
			}
		}
		every_country = {
			limit = {
				has_country_modifier = great_bullion_famine_modifier
			}
			add_inflation = -1
		}
	}
	
	option = {	#We can't risk people starving
		name = bullion.2.b
		ai_chance = { factor = 2 }
		add_inflation = 5
		sicily_area = = {
			limit = { owned_by = ROOT }
			add_province_modifier = {
				name = sicily_didnt_sell_wheat
				duration = 1095
			}
		}
		east_sicily_area = {
			limit = { owned_by = ROOT }
			add_province_modifier = {
				name = sicily_didnt_sell_wheat
				duration = 1095
			}
		}
		every_country = {
			limit = {
				has_country_modifier = great_bullion_famine_modifier
			}
			add_inflation = 3
		}
	}
}

#Closing of Brabantian coin mints
country_event = {
	id = bullion.3
	title = bullion.3.t
	desc = bullion.3.d
	picture = DEATH_OF_HEIR_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		is_year = 1445
		owns = 92
	}
	
	mean_time_to_happen = {
		years = 8
	}
	
	option = {
		name = bullion.3.a #There's nothing we can do without supply.
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				home_trade_node = {
					OR = {
						province_id = 183
						province_id = 1876
						province_id = 1269
					}
				}
			}
			add_inflation = 2
		}
		add_inflation = 4
		ai_chance = {
			factor = 9
		}
	}
	
	option = {
		name = bullion.3.b #Try to personally import gold from far away and keep minting.
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				home_trade_node = {
					OR = {
						province_id = 183
						province_id = 1876
						province_id = 1269
					}
				}
			}
			add_inflation = 2
		}
		add_years_of_income = -1
		ai_chance = {
			factor = 1
		}
	}
}

#Closing of Flemish coin mints
country_event = {
	id = bullion.4
	title = bullion.4.t
	desc = bullion.4.d
	picture = DEATH_OF_HEIR_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		is_year = 1450
		owns = 1865
	}
	
	mean_time_to_happen = {
		years = 8
	}
	
	option = {
		name = bullion.3.a #There's nothing we can do without supply.
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				home_trade_node = {
					OR = {
						province_id = 183
						province_id = 1876
						province_id = 1269
					}
				}
			}
			add_inflation = 3
		}
		add_inflation = 5
		ai_chance = {
			factor = 9
		}
	}
	
	option = {
		name = bullion.3.b #Try to personally import gold from far away and keep minting.
		every_country = {
			limit = {
				NOT = { tag = ROOT }
				home_trade_node = {
					OR = {
						province_id = 183
						province_id = 1876
						province_id = 1269
					}
				}
			}
			add_inflation = 3
		}
		add_years_of_income = -1
		ai_chance = {
			factor = 1
		}
	}

}

#Search for African gold
country_event = {
	id = bullion.5
	title = bullion.5.t
	desc = bullion.5.d
	picture = DEATH_OF_HEIR_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		has_country_modifier = great_bullion_famine_modifier
		guinea_region = {
			owned_by = ROOT
			is_city = yes
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	option = {
		name = bullion.5.a
		add_prestige = 10
		add_inflation = -3
		every_country = {
			limit = {
				religion_group = christian
				home_trade_node = {
					trade_range = ROOT
				}
				has_country_modifier = great_bullion_famine_modifier
			}
			add_opinion = {
				who = ROOT
				modifier = shipped_gold_from_africa
			}
		}
		every_country = {
			limit = {
				has_country_modifier = great_bullion_famine_modifier
				home_trade_node = {
					trade_range = ROOT
				}
			}
			add_inflation = -1
		}
	}
}

#Nation-African gold trade
country_event = {
	id = bullion.6
	title = bullion.6.t
	desc = bullion.6.d
	picture = DEATH_OF_HEIR_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		has_country_modifier = great_bullion_famine_modifier
		any_owned_province = {
			OR = {
				area = ivory_coast_area
				area = west_africa_coast_area
			}
			is_city = yes
		}
	}
	
	option = {	#Secure the trade hold in the region, bringing about the decline of the trans-Saharan trade routes.
		name = bullion.6.a
		add_treasury = -100
		random_owned_province = {
			limit = {
				OR = {
					area = ivory_coast_area
					area = west_africa_coast_area
				}
				is_city = yes
			}
			add_building = fort_15th
			if = {
				limit = { NOT = { province_has_center_of_trade_of_level = 1 } }
				center_of_trade = 1
			}
		}
		every_country = {
			limit = { has_country_modifier = great_bullion_famine_modifier }
			add_inflation = -5
			add_opinion = {
				who = ROOT
				modifier = shipped_gold_from_africa
			}
		}
		every_country = {
			limit = {
				religion_group = muslim
				capital_scope = { region = maghreb_region }
			}
			add_country_modifier = {
				name = west_african_gold_lost
				duration = 3650
			}
			add_opinion = {
				who = ROOT
				modifier = west_african_gold_lost_opinion
			}
		}
		add_country_modifier = {
			name = west_african_gold_trade
			duration = 7300
		}
	}
	
	option = {	#Try to not anger Muslims and do fair trade.
		name = bullion.6.b
		every_country = {
			limit = { has_country_modifier = great_bullion_famine_modifier }
			add_inflation = -2
			add_opinion = {
				who = ROOT
				modifier = shipped_some_gold_from_africa
			}
		}
		add_country_modifier = {
			name = west_african_some_gold_trade
			duration = 7300
		}
	}
}

#Picard and Rhine gold
country_event = {
	id = bullion.7
	title = bullion.7.t
	desc = bullion.7.d
	picture = DEATH_OF_HEIR_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		#mints fired
		NOT = { num_of_cities = 10 }
		any_owned_province = {
			OR = {
				area = picardy_area
				area = north_rhine_area
				area = lower_rhineland_area
			}
		}
	}
	
	option = {
		name = bullion.7.a
		every_country = {
			limit = {
				has_country_modifier = great_bullion_famine_modifier
				capital_scope = {
					OR = {
						region = british_isles_region
						region = low_countries_region
						region = france_region
						region = south_german_region
						region = north_german_region
						#region = ireland_region ?
					}
				}
			}
			add_inflation = 2
		}
		every_country = {
			limit = {
				has_country_modifier = great_bullion_famine_modifier
			}
			add_inflation = 3
		}
	}
}

#Liquation and mining techniques advancements
country_event = {
	id = bullion.8
	title = bullion.8.t
	desc = bullion.8.d
	picture = DEATH_OF_HEIR_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		is_year = 1445
		has_country_modifier = great_bullion_famine_modifier
		any_owned_province = {
			tradegoods = gold
			OR = {
				region = south_german_region
				region = czech_lands_region
			}
		}
	}
	
	mean_time_to_happen = {
		years = 10
	}
	
	option = {
		name = bullion.8.a
		#big inno effect
		every_country = {
			limit = { has_country_modifier = great_bullion_famine_modifier }
			add_inflation = 2
		}
		#- Gold mines in the Tyrol and Sudety areas get +35% goods produced modifier (to counter -35% from venetian event)
	}
}

#End of the Great Bullion Famine
country_event = {
	id = bullion.100
	title = bullion.100.t
	desc = bullion.100.d
	picture = DEATH_OF_HEIR_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		is_year = 1520
		
	}
	
	mean_time_to_happen = {
		years = 10
	}
	
	immediate = {
		hidden_effect = {
			set_global_flag = great_bullion_famine_ended
			every_country = {
				limit = {
					capital_scope = {
						superregion = europe_superregion
					}
					NOT = {
						tag = MAM
						tag = TUR
					}
				}
				add_inflation = -5
			}
		}
	}
	
	option = {
		name = bullion.100.a
	}
}