namespace = BtPLegacy_european_trade

#Written by Driaocht 16-10-25
#Modified by Draiocht 16-12-1

##############################################
### Migration of Trade Power in the Low Countries ###
##############################################


#######################################
### Grand Centre of Trade Modifier Events ###
#######################################

#Venetian GCoT remove - leaving this code in and untouched from pre-Dharma period, though it will only activate if the player does not have Dharma.
province_event = {
	id = BtPLegacy_european_trade.6
	title = "BtPLegacy_european_trade.EVTNAME6"
	desc = "BtPLegacy_european_trade.EVTDESC6"
	picture = CITY_VIEW_eventPicture

	trigger = {
		NOT = { has_dlc = "Dharma" }
		province_id = 112
		province_has_center_of_trade_of_level = 3
		owner = {
			NOT = {
				OR = {
					tag = VEN
					AND = {
						primary_culture = venetian
						capital = 112
						NOT = { exists = VEN }
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}
	
	option = { # No other option
		name = "BtPLegacy_european_trade.EVTOPTA6"
		if = {
			limit = { development = 22 }
			add_base_tax = -2
			add_base_production = -2
			owner = {
				capital_scope  = {
					add_base_tax = 1
					add_base_production = 1
				 }
			}
		}
		add_center_of_trade_level = -1
	}
}

#Genovese GCoT remove - leaving this code in and untouched from pre-Dharma period, though it will only activate if the player does not have Dharma.
province_event = {
	id = BtPLegacy_european_trade.7
	title = "BtPLegacy_european_trade.EVTNAME7"
	desc = "BtPLegacy_european_trade.EVTDESC7"
	picture = CITY_VIEW_eventPicture

	trigger = {
		NOT = { has_dlc = "Dharma" }
		province_id = 101
		province_has_center_of_trade_of_level = 3
		owner = {
			NOT = {
				OR = {
					tag = GEN
					AND = {
						primary_culture = ligurian
						capital = 101
						NOT = { exists = GEN }
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}
	
	option = { # No other option
		name = "BtPLegacy_european_trade.EVTOPTA7"
		if = {
			limit = { development = 22 }
			add_base_tax = -2
			add_base_production = -2
			owner = {
				capital_scope  = {
					add_base_tax = 1
					add_base_production = 1
				 }
			}
		}
		add_center_of_trade_level = -1
	}
}

#Hanseatic GCoT remove - leaving this code in and untouched from pre-Dharma period, though it will only activate if the player does not have Dharma.
province_event = {
	id = BtPLegacy_european_trade.8
	title = "BtPLegacy_european_trade.EVTNAME8"
	desc = "BtPLegacy_european_trade.EVTDESC8"
	picture = CITY_VIEW_eventPicture

	trigger = {
		NOT = { has_dlc = "Dharma" }
		province_id = 45
		province_has_center_of_trade_of_level = 3
		owner = {
			NOT = {
				OR = {
					tag = HSA
					AND = {
						primary_culture = hannoverian
						capital = 45
						NOT = { exists = HSA }
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 3
	}
	
	option = { # No other option
		name = "BtPLegacy_european_trade.EVTOPTA8"
		if = {
			limit = { development = 22 }
			add_base_tax = -2
			add_base_production = -2
			owner = {
				capital_scope  = {
					add_base_tax = 1
					add_base_production = 1
				 }
			}
		}
		add_center_of_trade_level = -1
	}
}

#Removal of a new GCoT - cutting for Dharma, as new 3rd tier trade centres are added outside of the old 3 in BT
#province_event = {
#	id = BtPLegacy_european_trade.9
#	title = "BtPLegacy_european_trade.EVTNAME9"
#	desc = "BtPLegacy_european_trade.EVTDESC9"
#	picture = CITY_VIEW_eventPicture
#	
#	major = yes
#
#	trigger = {
#		NOT = { has_dlc = "Dharma" }
#		province_has_center_of_trade_of_level = 3
#		NOT = {
#			province_id = 112
#			province_id = 101
#			province_id = 45
#		}
#		OR = {
#			NOT = { development = 28 }
#			NOT = { is_capital = yes }
#			NOT = { has_owner_culture = yes }
#		}
#	}
#
#	mean_time_to_happen = {
#		days = 30
#	}
#	
#	option = { # No other option
#		name = "BtPLegacy_european_trade.EVTOPTA9"
#		if = {
#			limit = { development = 30 }
#			add_base_tax = -2
#			add_base_production = -2
#			owner = {
#				capital_scope  = {
#					add_base_tax = 1
#					add_base_production = 1
#				 }
#			}
#		}
#		add_center_of_trade_level = -1
#	}
#}

#Creation of a new GCoT - leaving this code in and untouched from pre-Dharma period, though it will only activate if the player does not have Dharma.
province_event = {
	id = BtPLegacy_european_trade.10
	title = "BtPLegacy_european_trade.EVTNAME10"
	desc = "BtPLegacy_european_trade.EVTDESC10"
	picture = CITY_VIEW_eventPicture

	trigger = {
		NOT = { has_dlc = "Dharma" }
		province_has_center_of_trade_of_level = 2
		has_port = yes
		development = 25
		is_capital = yes
		has_owner_culture = yes
		has_owner_religion = yes
		owner = {
			government = republic
			is_free_or_tributary_trigger = yes
		}			#For now going with the rule that to form a GCoT, one must be a republic, but may keep the GCoT even after reforming government. Might change this later.
	}

	mean_time_to_happen = {
		months = 2400			#200 years, reduced to either around 40y with full bonuses or 500y with full penalties
		
		modifier = {
			factor = 1.2
			owner = { NOT = { stability = -2 } }
		}
		modifier = {
			factor = 1.2
			owner = { NOT = { stability = -1 } }
		}
		modifier = {
			factor = 1.2
			owner = { NOT = { stability = 0 } }
		}
		modifier = {
			factor = 0.9
			owner = { stability = 1 }
		}
		modifier = {
			factor = 0.9
			owner = { stability = 2 }
		}
		modifier = {
			factor = 0.9
			owner = { stability = 3 }
		}
		modifier = {
			factor = 0.9
			owner = { adm = 5 }
		}
		modifier = {
			factor = 0.9
			owner = { adm = 6 }
		}
		modifier = {
			factor = 1.2
			owner = { NOT = { adm = 3 } }
		}
		modifier = {
			factor = 0.9
			owner = { dip = 5 }
		}
		modifier = {
			factor = 0.9
			owner = { dip = 6 }
		}
		modifier = {
			factor = 1.2
			owner = { NOT = { dip = 3 } }
		}
		modifier = {
			factor = 0.9
			owner = { ruler_has_personality = entrepreneur_personality }
		}
		modifier = {
			factor = 0.9
			owner = { ruler_has_personality = midas_touched_personality }
		}
		modifier = {
			factor = 0.5
			owner = { primary_culture = dutch }
		}
		modifier = {
			factor = 0.2
			province_id = 97			#Amsterdam
		}
	}
	
	option = { # Yay
		name = "BtPLegacy_european_trade.EVTOPTA10"
		add_base_tax = 1
		add_base_production = 1
		add_center_of_trade_level = 1
	}
}
